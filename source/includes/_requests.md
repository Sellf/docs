# Requests

As stated before, the Sellf API is accessed from the secure domain `https://api.sellf.io`. All data is sent and received in the JSON format.

### Pagination

```shell
curl https://api.sellf.io/v2/deals?page=3 \
	-H "Api-Key: {YOUR_API_KEY}"
```

Most of the list operations are paginated. You can control it with the `page` parameter. Pages start at `1` and the first page will be returned if no page is specified. Data is limited to `20` entities per page.

The depicted example shows how to get the third page of all the team deals.


### Sorting

```shell
# To get a list of deals sorted by estimated value in descending order
curl https://api.sellf.io/v2/deals?sort_by=-estimated_value \
	-H "Api-Key: {YOUR_API_KEY}"
```

You can control in what order, according to a criteria, how to sort listed entities using the query parameter `sort_by`.

The default sort order is ascending. If you want to sort the entities in descending order, append a minus sign to the field.


### Ownership

In general, the identifier of a user needs to be specified when you want to add a new entity (e.g. a deal or a contact), via the `user_id` field. If you want to list a set of entities (e.g. all the deals owned by a specific user) you can do that via the `user_id` query parameter; be aware that if you do not specify any `user_id`, the APIs will return all the entities in your team.


### Permission

Each entity in Sellf has some attributes that are read-only and attributes that can be both retrieved and overwritten, via REST calls. In each section you'll find a table in which for each entity field is specified if it is possibile not only to read it but also sent it to Sellf through POST or PUT methods.


### Required fields

One or more attributes are usually required when creating or updating an entity. These required fields are highlighted with a bold font within each attributes table that you can find at the beginning of each entity section.


### <a name="custom_fields"></a>Custom fields

[People](#people), [Companies](#companies) and [Deals](#deals) can be enriched with custom attributes. In the `Settings > Custom Fields` section of Sellf web app you can add whatever custom field is needed by your team. Once you have added your custom fields, they can be set or update via the APIs using the following notation:

`
	custom_fields: {
		<key>:<value>,
		...
	}
`

where `<key>` (without <> signs) is the key listed in the row of each custom field added to an entity in the `Settings > Custom Fields` section of Sellf web app (e.g. `custom_fields.loyal` supposing to have created a boolean custom field for the people entities with key `loyal`). The key are auto-generated by the system to avoid conflicts.

<aside class="notice">
In general, the API datetimes are represented in UTC following the ISO 8601 standard. Since the custom fields allow both <em>date</em> and <em>time</em> format, you have to strip the date and time accordingly (e.g. the datetime 2017-06-30T19:46Z becomes 2017-06-30 for a date field and 19:46 for a time one)
</aside>

Custom fields can also be queried. Please refer to the following paragraph to see how the Sellf query language works.


### <a name="query_language"></a>Query language

Each entity in Sellf has some attributes that can be queried to apply filters on retrieval requests. The allowed operators related to the Sellf query language are listed below:

| Operator | Description | Term |
| --- | --- | --- |
| eq | query for *value equal to* | single |
| neq | query for *value differs from* | single |
| lt | query for *value less than* | single |
| gt | query for *value greater than* | single |
| lte | query for *value less than or equal to* | single |
| gte | query for *value greater than or equal to* | single |
| in | query for *value is contained into* | multiple |
| contains | query for *value contains all* | single or multiple |

<aside class="notice">
The `contains` operator works only on custom fields that have the multiple option enabled.
</aside>

The rule to apply the above mentioned operators is the following:

`<attribute>:<operator>=<term>`

where `<term>` can be a single value or a list of values (e.g. `user_id:neq=12` or `user_id:in=12,13`).

<aside class="notice">
Note that the system implicitly use `and` connection between queries, and `eq` operator as default argument if not specified (e.g. `user_id=23` is the implicit form of `user_id:eq=23`).
</aside>

It is trivial to say that some operators applies only to specific attributes' types (e.g. you cannot use numeric operators like comparators on string types).

Custom fields works in the same way, the only difference is that the `<attribute>` is replace by the key notation: `custom_fields.<key>` (e.g. `custom_fields.loyal:eq=true`).





